{"version":3,"sources":["admin.js","contributors.js","main.js","userProfileSection.js","postAceInit.js","aceInitialized.js","handleClientMessage.js","helper.js","shared.js","syncData.js"],"names":["exports","init","documentReady","hooks","context","cb","socket","loc","document","location","port","protocol","url","hostname","pathComponents","pathname","split","baseURL","slice","length","join","resource","substring","room","io","connect","path","on","data","console","log","shared","setFormData","$","getFormData","emit","alert","contributors","getHtmlOfUsersList","userId","username","img","anonymous_handler","about","homepage","seenStatus","style","getValidUrl","increaseToOnlineAnonymous","selector_on","anonymouseCount","attr","ids_data_array","indexOf","push","new_anonymouseCount","parseInt","children","text","decreaseFromOnlineAnonymous","grep","value","remove","increaseToOfflineAnonymous","selector_off","ids_data","createOfflineAnonymousElement","userElement","userListHtml","offline_list_selector","user_selector","insertBefore","append","prepend","moveOnlineUserToOffline","createHTMLforUserList","total","online","padId","verified_users","html","borderStyle","each","reverse","key","increaseUserFromList","$image","prependTo","hide","slideDown","decreaseUserFromList","animate","opacity","this","selector_user","appendTo","image_url","Date","getTime","css","background-position","background-image","background-repeat","background-size","manageOnlineOfflineUsers","all_users_list","onlineUsers","currentUserId","online_list_selector","empty","e","userName","imageUrl","margin-top","error","last_seen_date","getCustomDate","selector_offlines_date","ids_data_off_array","createOnlineUserElementInUserList","user","titleOfContributors","insertAfter","isThereOnlineAnonymous","selector","checkUserExistInOnlineAnonymous","createOnlineAnonymousElement","removeUserElementInUserList","profileForm","hideFormModalOverlay","removeClass","display","handleOnCloseOverlay","pad","getUserId","getPadId","$form","msg","ep_profile_modalForm_name","ep_profile_modalForm_about_yourself","ep_profile_modalForm_homepage","target","time","message","type","action","collabClient","sendMessage","unindexed_array","serializeArray","indexed_array","map","n","i","name","showModal","addClass","setTimeout","focus","resetModal","index","show","initModal","clientVars","current_fs","next_fs","previous_fs","animating","modal","tmpl","sendFormDataToServer","submitHandle","val","helper","userLogin","email","refreshUserImage","nextHandler","currentSection","border","loginByEmailAndUsernameWithoutValidation","userEmail","isEmail","ajax","contentType","processData","[object Object]","xhr","oldText","response","sendEmailVerification","userLink","IsValid","fd","FormData","files","refreshLoadingImage","replace","uploadImg","nextSelection","select","keyCode","preventDefault","next","click","parent","prev","resetAllProfileImage","URL","createObjectURL","usersProfileSection","initiate","initiateListeners","background-color","href","showGeneralOverlay","hideGeneralOverlay","postAceInit","hook","updateUserInfo","colorId","window","user_status","hasClass","verificationStatus","dummy","createElement","body","appendChild","execCommand","removeChild","gritter","add","syncData","resetProfileModalFields","userLogout","loginByEmailAndUsername","aceInitialized","ep_profile_modal","form_passed","getConnectedUsers","usersListHTML","contributed_authors_count","handleClientMessage","handleClientMessage_USER_NEWINFO","payload","handleClientMessage_USER_LEAVE","handleClientMessage_CUSTOM","current_user_id","totalUserCount","list","refreshGeneralImage","logoutCssFix","resetGeneralFields","online_anonymous_selector","addTextChatMessage","syncAllFormsData","syncGeneralFormsData","avatar","margin","box-shadow","scrollDownToLastChatText","$element","scrollTop","scrollHeight","duration","queue","test","getMonthName","monthNumber","sendSignOutMessage","authorClass","c","charCodeAt","minutes","getMinutes","hours","getHours","find","suggestData","isUsername","newUrl","decodeURIComponent","trim","getCustomeFormatDate","date","usernameBox","verified"],"mappings":"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","file":"ep.profile.modal.mini.js","sourcesContent":["// var shared = require('../shared');\n\nconst documentReady = (() => {\n\n\tconst documentReady = (hooks, context, cb) => {\n\t\tif (context !== 'admin/ep_profile_modal') {\n\t\t\treturn [];\n\t\t}\n\t\n\t\tlet socket;\n\t\tconst loc = document.location;\n\t\tconst port = loc.port == '' ? (loc.protocol == 'https:' ? 443 : 80) : loc.port;\n\t\tconst url = `${loc.protocol}//${loc.hostname}:${port}/`;\n\t\tconst pathComponents = location.pathname.split('/');\n\t\t// Strip admin/plugins\n\t\tconst baseURL = `${pathComponents.slice(0, pathComponents.length - 2).join('/')}/`;\n\t\tconst resource = `${baseURL.substring(1)}socket.io`;\n\t\n\t\tconst room = `${url}pluginfw/admin/ep_profile_modal`;\n\t\n\t\tlet changeTimer;\n\t\n\t\n\t\t// connect\n\t\tsocket = io.connect(room, {path: `${baseURL}socket.io`, resource});\n\t\tsocket.on('load-settings-result', (data) => {\n\t\t\tconsole.log(data);\n\t\t\tshared.setFormData($('#settings-form'), data);\n\t\t});\n\t\n\t\t$('#save-settings').on('click', () => {\n\t\t\tconst data = shared.getFormData($('#settings-form'));\n\t\t\tconsole.log(data, 'data');\n\t\t\tsocket.emit('save-settings', data);\n\t\t\talert('Succesfully saved.');\n\t\t});\n\t\n\t\tsocket.emit('load-settings');\n\t\n\t\n\t\treturn [];\n\t};\n\n\treturn documentReady\n})();\n","// var shared = require('../shared');\n\n\nconst contributors = (() => {\n\tvar defaultImg = '../static/plugins/ep_profile_modal/static/img/user.png';\n\t\n\tconst createHTMLforUserList = function (total, online, padId, verified_users) { // generate avatar too\n\t\tlet html = \"<div id='usersIconList' class='ep_profile_inlineAvatars'>\";\n\t\tlet style;\n\t\tlet borderStyle = '';\n\t\t$.each(online.reverse(), (key, value) => {\n\t\t\tstyle = `background: url(/p/getUserProfileImage/${value.userId}/${padId}) no-repeat 50% 50% ; background-size : 28px;background-color: #fff;`;\n\t\t\tif (verified_users && verified_users.length && verified_users !== 'null' && verified_users !== null) {\n\t\t\t\tif (verified_users.indexOf(value.userId) == -1) { borderStyle = ''; } else { borderStyle = 'box-shadow: 0px 0px 1px 1px rgba(38,121,255,1);margin: 1px;'; }\n\t\t\t}\n\n\t\t\tstyle += borderStyle;\n\t\t\thtml += `<div class='avatar' data-userId=\"${value.userId}\" data-id=\"user_${value.userId}\"  id=\"user_${value.userId}\" ><div data-userId=\"${value.userId}\"  class='avatarImg' style='${style}' data-id=\"user_${value.userId}\"></div></div>`;\n\t\t});\n\t\thtml += ' </div>';\n\t\treturn `${html}<span class='slash_profile'>⧸</span><span id='userlist_count' class='userlist_count'>${total}</span>` +\n\t\t\t'<input  value=\\'Share\\'  id=\\'ep_profile_modal_share\\' type=\\'button\\' class=\\'ep_profile_modal_share\\'>';\n\t};\n\n\tconst increaseUserFromList = function (userId, padId) {\n\t\tconst style = `background: url(/p/getUserProfileImage/${userId}/${padId}) no-repeat 50% 50% ; background-size : 26px;background-color: #fff;`;\n\n\n\t\tif (!$(`.avatar[data-id=\"user_${userId}\"]`).length) {\n\t\t\tconst $image = $(`<div class='avatar' data-userId=\"${userId}\"  data-id=\"user_${userId}\" id=\"user_${userId}\" ><div class='avatarImg' data-userId=\"${userId}\"  data-id=\"user_${userId}\" style='${style}'></div></div>`);\n\t\t\t$image.prependTo('#usersIconList');\n\t\t\t$image.hide().slideDown(200);\n\t\t}\n\t};\n\n\tconst decreaseUserFromList = function (userId, padId) {\n\t\t$(`.avatar[data-id=\"user_${userId}\"]`).animate({opacity: 0}, 1000, 'linear', function () {\n\t\t\t$(this).remove();\n\t\t}\n\t\t);\n\n\t\tconst selector_user = $(`.ep_profile_user_row[data-id=\"user_list_${userId}\"]`);\n\t\tif (selector_user.length) {\n\t\t\tmoveOnlineUserToOffline(selector_user);\n\t\t\t// selector_user.animate({opacity: 0}, 1000,\"linear\",function()\n\t\t\t// {\n\t\t\t//     $(this).remove();\n\t\t\t// }\n\t\t\t// )\n\t\t} else {\n\t\t\tconst selector_on = $('.ep_profile_user_row[data-id=\"user_list_on_Anonymous\"]');\n\t\t\tif (selector_on.length) {\n\t\t\t\tconst selector_off = $('.ep_profile_user_row[data-id=\"user_list_off_Anonymous\"]');\n\t\t\t\tdecreaseFromOnlineAnonymous(selector_on, userId);\n\t\t\t\tif (selector_off.length) {\n\t\t\t\t\tincreaseToOfflineAnonymous(selector_off, userId);\n\t\t\t\t} else {\n\t\t\t\t\tcreateOfflineAnonymousElement(userId, defaultImg, null, null, selector_user);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tlet offline_list_selector = $('#ep_profile_user_list_offline');\n\t\t\t\tif (offline_list_selector.length) {\n\t\t\t\t\toffline_list_selector.append($(`.ep_profile_user_row[data-id=\"user_list_${userId}\"]`));\n\t\t\t\t} else {\n\t\t\t\t\tconst offline_container = $('#ep_profile_user_list_container_off');\n\t\t\t\t\toffline_container.prepend(\"<div class='ep_profile_user_list_date_title' id='ep_profile_user_list_offline'> </div>\");\n\t\t\t\t\toffline_list_selector = $('#ep_profile_user_list_offline');\n\t\t\t\t\t$(`.ep_profile_user_row[data-id=\"user_list_${userId}\"]`).appendTo(offline_list_selector);\n\t\t\t\t}\n\t\t\t\t// $(\".ep_profile_user_row[data-id=\\\"user_list_\"+userId+\"\\\"]\").appendTo(\"#ep_profile_user_list_container_off\")\n\t\t\t}\n\t\t}\n\n\t\t// user img update\n\t\tconst image_url = `/p/getUserProfileImage/${userId}/${padId}?t=${new Date().getTime()}`;\n\t\tconst user_selector = $(`.ep_profile_user_row[data-id=\"user_list_${userId}\"]`);\n\t\tif (user_selector.length) {\n\t\t\tuser_selector.children('.ep_profile_user_img').css({'background-position': '50% 50%',\n\t\t\t\t'background-image': `url(${image_url})`, 'background-repeat': 'no-repeat', 'background-size': '69px'});\n\t\t}\n\t};\n\n\n\tconst manageOnlineOfflineUsers = function (all_users_list, onlineUsers, currentUserId) {\n\t\tconst online_list_selector = $('#ep_profile_user_list_container');\n\t\tconst offline_list_selector = $('#ep_profile_user_list_container_off');\n\n\t\toffline_list_selector.empty();\n\t\t$.each(all_users_list, (key, value) => {\n\t\t\t// if (value.userId != currentUserId){\n\t\t\tconst result = $.grep(onlineUsers, (e) => e.userId == value.userId);\n\t\t\tif (result.length) { // online\n\t\t\t\tif (value.userName == 'Anonymous') {\n\t\t\t\t\tconst selector_on = $('.ep_profile_user_row[data-id=\"user_list_on_Anonymous\"]');\n\n\t\t\t\t\tif (selector_on.length) {\n\t\t\t\t\t\tincreaseToOnlineAnonymous(selector_on, value.userId);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar userListHtml = getHtmlOfUsersList(value.userId, value.userName, value.imageUrl, 'on_Anonymous', value.about, value.homepage, 'Online');\n\t\t\t\t\t\tonline_list_selector.append(userListHtml);\n\t\t\t\t\t}\n\t\t\t\t\tif (currentUserId == value.userId) { $(\".ep_profile_user_row[data-id='user_list_on_Anonymous']\").css({'margin-top': '28px'}); } // design\n\t\t\t\t} else {\n\t\t\t\t\tif (!$(`.ep_profile_user_row[data-id=\"user_list_${value.userId}\"]`).length) {\n\t\t\t\t\t\tvar userListHtml = getHtmlOfUsersList(value.userId, value.userName, value.imageUrl, false, value.about, value.homepage, 'Online');\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tonline_list_selector.append(userListHtml);\n\t\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t\tconsole.log(error);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (currentUserId == value.userId) {\n\t\t\t\t\t\t$(`.ep_profile_user_row[data-id=\"user_list_${value.userId}\"]`).prependTo(online_list_selector);\n\t\t\t\t\t\t// $(\".ep_profile_user_list_date_title_header\").prependTo(online_list_selector)\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$(`.ep_profile_user_row[data-id=\"user_list_${value.userId}\"]`).appendTo(online_list_selector);\n\t\t\t\t\t}\n\t\t\t\t\tif (currentUserId == value.userId) { $(`.ep_profile_user_row[data-id=\"user_list_${value.userId}\"]`).css({'margin-top': '28px'}); } // design\n\t\t\t\t}\n\t\t\t} else { // offline\n\t\t\t\tif (value.last_seen_date !== '') {\n\t\t\t\t\tif (value.userName != 'Anonymous') {\n\t\t\t\t\t\tif (!$(`.ep_profile_user_row[data-id=\"user_list_${value.userId}\"]`).length) {\n\t\t\t\t\t\t\tvar userListHtml = getHtmlOfUsersList(value.userId, value.userName, value.imageUrl, false, value.about, value.homepage, shared.getCustomDate(value.last_seen_date));\n\t\t\t\t\t\t\tconst selector_offlines_date = $('#ep_profile_user_list_offline');\n\t\t\t\t\t\t\tif (selector_offlines_date.length) {\n\t\t\t\t\t\t\t\tselector_offlines_date.append(userListHtml);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t$('#ep_profile_user_list_container_off').append(`<div class='ep_profile_user_list_date_title' id='ep_profile_user_list_offline'>   ${userListHtml}</div>`);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t$(`.ep_profile_user_row[data-id=\"user_list_${value.userId}\"]`).appendTo(offline_list_selector);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\n\t\t\t// }\n\t\t});\n\n\t\t// just for anonymouse to be end of list\n\t\t$.each(all_users_list, (key, value) => {\n\t\t\t// if (value.userId != currentUserId){\n\t\t\tconst result = $.grep(onlineUsers, (e) => e.userId == value.userId);\n\t\t\tif (!result.length) { // offline\n\t\t\t\tif (value.last_seen_date !== '' && value.userName == 'Anonymous') {\n\t\t\t\t\tconst selector_off = $('.ep_profile_user_row[data-id=\"user_list_off_Anonymous\"]');\n\t\t\t\t\tif (selector_off.length) {\n\t\t\t\t\t\tconst anonymouseCount = selector_off.attr('data-anonymouseCount');\n\t\t\t\t\t\tconst new_anonymouseCount = parseInt(anonymouseCount) + 1;\n\n\t\t\t\t\t\tconst ids_data_off = selector_off.attr('data-user-ids');\n\t\t\t\t\t\tconst ids_data_off_array = ids_data_off.split(',');\n\t\t\t\t\t\tids_data_off_array.push(value.userId);\n\t\t\t\t\t\tselector_off.attr('data-user-ids', ids_data_off_array.join(','));\n\n\t\t\t\t\t\tselector_off.attr('data-anonymouseCount', new_anonymouseCount);\n\t\t\t\t\t\tselector_off.children('.ep_profile_user_list_profile_userDesc').children('.ep_profile_user_list_username').text(`Anonymous ×${new_anonymouseCount}`);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// createOfflineAnonymousElement(value.userId , value.imageUrl,value.about,value.homepage,)\n\t\t\t\t\t\tconst userListHtml = getHtmlOfUsersList(value.userId, 'Anonymous', value.imageUrl, 'off_Anonymous', value.about, value.homepage, shared.getCustomDate(value.last_seen_date));\n\t\t\t\t\t\tconst selector_offlines_date = $('#ep_profile_user_list_offline');\n\t\t\t\t\t\tif (selector_offlines_date.length) {\n\t\t\t\t\t\t\tselector_offlines_date.append(userListHtml);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t$('#ep_profile_user_list_container_off').append(`<div class='ep_profile_user_list_date_title' id='ep_profile_user_list_offline'>  ${userListHtml}</div>`);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t};\n\n\tvar getHtmlOfUsersList = function (userId, username, img, anonymous_handler, about, homepage, seenStatus) {\n\t\tabout = about || '';\n\t\thomepage = homepage || '';\n\t\tlet style;\n\t\tif (anonymous_handler && username == 'Anonymous') {\n\t\t\tstyle = `background: url(${img}) no-repeat 50% 50% ; background-size : 69px ;`;\n\n\t\t\treturn (`<div  data-user-ids='${userId}' data-anonymouseCount='1' data-id='user_list_${anonymous_handler}' class='ep_profile_user_row'>` +\n\t\t\t\t\t`<div style='${style}' class='ep_profile_user_img'></div>` +\n\t\t\t\t\t'<div class=\\'ep_profile_user_list_profile_userDesc\\'>' +\n\t\t\t\t\t\t\t`<div class='ep_profile_user_list_username'><div class='ep_profile_user_list_username_text' >${username}</div>` +\n\t\t\t\t\t\t\t`<div class='ep_profile_contributor_status'>${seenStatus}</div>` +\n\t\t\t\t\t\t\t'</div>' +\n\t\t\t\t\t\t\t`<p class='ep_profile_user_list_profile_desc'>${about}</p>` +\n\t\t\t\t\t'</div> </div>');\n\t\t} else {\n\t\t\tstyle = `background: url(${img}) no-repeat 50% 50% ; background-size : 69px ;`;\n\t\t\treturn (`<div data-id='user_list_${userId}' class='ep_profile_user_row'>` +\n\t\t\t\t\t`<div style='${style}' class='ep_profile_user_img'></div>` +\n\t\t\t\t\t'<div class=\\'ep_profile_user_list_profile_userDesc\\'>' +\n\t\t\t\t\t\t\t`<div class='ep_profile_user_list_username'><div class='ep_profile_user_list_username_text' >${username}</div>` +\n\t\t\t\t\t\t\t`<a target='_blank'  class='ep_profile_contributor_link_container' title='${shared.getValidUrl(homepage)}' href='${shared.getValidUrl(homepage)}'> </a>` +\n\t\t\t\t\t\t\t`<div class='ep_profile_contributor_status'>${seenStatus}</div>` +\n\t\t\t\t\t\t\t'</div>' +\n\t\t\t\t\t\t\t`<p class='ep_profile_user_list_profile_desc'>${about}</p>` +\n\t\t\t\t\t'</div> </div>');\n\t\t}\n\t};\n\n\n\tconst increaseToOnlineAnonymous = function (selector_on, userId) {\n\t\tconst anonymouseCount = selector_on.attr('data-anonymouseCount');\n\t\tconst ids_data = selector_on.attr('data-user-ids');\n\t\tconst ids_data_array = ids_data.split(',');\n\t\tif (ids_data_array.indexOf(userId) == -1) {\n\t\t\tids_data_array.push(userId);\n\t\t\tselector_on.attr('data-user-ids', ids_data_array.join(','));\n\t\t\tconst new_anonymouseCount = parseInt(anonymouseCount) + 1;\n\t\t\tselector_on.attr('data-anonymouseCount', new_anonymouseCount);\n\t\t\tselector_on.children('.ep_profile_user_list_profile_userDesc').children('.ep_profile_user_list_username')\n\t\t\t\t\t.children('.ep_profile_user_list_username_text').text(`Anonymous ×${new_anonymouseCount}`);\n\t\t}\n\t};\n\n\tconst decreaseFromOnlineAnonymous = function (selector_on, userId) {\n\t\tconst anonymouseCount = selector_on.attr('data-anonymouseCount');\n\t\tconst ids_data = selector_on.attr('data-user-ids');\n\t\tlet ids_data_array = ids_data.split(',');\n\n\n\t\tids_data_array = $.grep(ids_data_array, (value) => value != userId);\n\n\n\t\tselector_on.attr('data-user-ids', ids_data_array.join(','));\n\t\tconst new_anonymouseCount = parseInt(anonymouseCount) - 1;\n\t\tselector_on.attr('data-anonymouseCount', new_anonymouseCount);\n\t\tif (new_anonymouseCount > 1) {\n\t\t\tselector_on.children('.ep_profile_user_list_profile_userDesc').children('.ep_profile_user_list_username')\n\t\t\t\t\t.children('.ep_profile_user_list_username_text').text(`Anonymous ×${new_anonymouseCount}`);\n\t\t} else {\n\t\t\tselector_on.children('.ep_profile_user_list_profile_userDesc').children('.ep_profile_user_list_username')\n\t\t\t\t\t.children('.ep_profile_user_list_username_text').text('Anonymous');\n\t\t}\n\n\t\tif (new_anonymouseCount < 1) {\n\t\t\tselector_on.remove();\n\t\t}\n\t\treturn new_anonymouseCount;\n\t};\n\n\n\tconst increaseToOfflineAnonymous = function (selector_off, userId) {\n\t\tconst anonymouseCount = selector_off.attr('data-anonymouseCount');\n\t\tlet ids_data = selector_off.attr('data-user-ids');\n\n\t\tids_data = $.grep(ids_data, (value) => value != userId);\n\n\t\tselector_off.attr('data-user-ids', ids_data);\n\t\tconst new_anonymouseCount = parseInt(anonymouseCount) + 1;\n\t\tselector_off.attr('data-anonymouseCount', new_anonymouseCount);\n\t\tselector_off.children('.ep_profile_user_list_profile_userDesc').children('.ep_profile_user_list_username').children('.ep_profile_user_list_username_text')\n\t\t\t\t.text(`Anonymous ×${new_anonymouseCount}`);\n\t};\n\n\n\t// var decreaseFromOfflineAnonymous= function (selector_off,userId){\n\t//     var anonymouseCount = selector_off.attr(\"data-anonymouseCount\")\n\t//     var ids_data = selector_off.attr(\"data-user-ids\")\n\n\t//     ids_data = $.grep(ids_data, function(value) {\n\t//         return value != userId;\n\t//       });\n\n\t//     selector_off.attr(\"data-user-ids\",ids_data)\n\t//     var new_anonymouseCount= parseInt(anonymouseCount)-1\n\t//     selector_off.attr('data-anonymouseCount',new_anonymouseCount);\n\t//     (new_anonymouseCount > 1) ? selector_off.children(\".ep_profile_user_username\").text(\"Anonymous ×\"+new_anonymouseCount) : selector_off.children(\".ep_profile_user_username\").text(\"Anonymous\");\n\t//     return new_anonymouseCount\n\t// }\n\n\n\tconst createOfflineAnonymousElement = function (userId, img, about, homepage, userElement) {\n\t\tconst userListHtml = getHtmlOfUsersList(userId, 'Anonymous', img, 'off_Anonymous', about, homepage, 'Today');\n\t\t// $(\"#ep_profile_user_list_container_off\").append(userListHtml);\n\t\tlet offline_list_selector = $('#ep_profile_user_list_offline');\n\t\tif (offline_list_selector.length) {\n\t\t\tconst user_selector = $(\".ep_profile_user_row[data-id='user_list_off_Anonymous']\"); // because need anonymous offline be last one\n\t\t\tif (user_selector.length) {\n\t\t\t\tuserElement.insertBefore(user_selector);\n\t\t\t} else {\n\t\t\t\toffline_list_selector.append(userElement);\n\t\t\t}\n\t\t} else {\n\t\t\tconst offline_container = $('#ep_profile_user_list_container_off');\n\t\t\toffline_container.prepend(\"<div class='ep_profile_user_list_date_title' id='ep_profile_user_list_offline'></div>\");\n\t\t\toffline_list_selector = $('#ep_profile_user_list_offline');\n\t\t\toffline_list_selector.append(userListHtml);\n\t\t}\n\t};\n\n\n\tconst createOnlineUserElementInUserList = function (userId, userName, img, currentUserId, user) {\n\t\tconst user_selector = $(`.ep_profile_user_row[data-id=\"user_list_${userId}\"]`);\n\t\tif (!user_selector.length) {\n\t\t\tconst userListHtml = getHtmlOfUsersList(userId, userName, img, false, user.about, user.homepage, 'Online');\n\t\t\tif (userId == currentUserId) { // it is owner\n\t\t\t\tconst titleOfContributors = $('#ep_profile_user_list_date_title');\n\t\t\t\tif (titleOfContributors.length) {\n\t\t\t\t\t$(userListHtml).insertAfter(titleOfContributors);\n\t\t\t\t} else {\n\t\t\t\t\t$('#ep_profile_user_list_container').prepend(userListHtml);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t$('#ep_profile_user_list_container').append(userListHtml);\n\t\t\t}\n\t\t} else {\n\t\t\tuser_selector.children('.ep_profile_user_list_profile_userDesc').children('.ep_profile_user_list_username').children('.ep_profile_user_list_username_text')\n\t\t\t\t\t.text(userName);\n\t\t\tuser_selector.children('.ep_profile_user_img').css({'background-position': '50% 50%',\n\t\t\t\t'background-image': `url(${img})`, 'background-repeat': 'no-repeat', 'background-size': '69px'});\n\t\t\t// attr(\"src\",img);\n\t\t}\n\t};\n\n\tconst isThereOnlineAnonymous = function () {\n\t\tconst selector = $('.ep_profile_user_row[data-id=\"user_list_on_Anonymous\"]');\n\t\tif (selector.length) { return selector; } else { return false; }\n\t};\n\tconst checkUserExistInOnlineAnonymous = function (selector_on, userId) {\n\t\tconst ids_data = selector_on.attr('data-user-ids');\n\t\tconst ids_data_array = ids_data.split(',');\n\t\tif (ids_data_array.indexOf(userId) == -1) {\n\t\t\treturn false;\n\t\t} else {\n\t\t\treturn true;\n\t\t}\n\t};\n\n\tconst createOnlineAnonymousElement = function (userId, userName, imageUrl, user) {\n\t\tconst online_list_selector = $('#ep_profile_user_list_container');\n\t\tconst userListHtml = getHtmlOfUsersList(userId, userName, imageUrl, 'on_Anonymous', user.about, user.homepage, 'Online');\n\t\tonline_list_selector.append(userListHtml);\n\t};\n\n\tconst moveOnlineUserToOffline = function (userElement) {\n\t\tlet offline_list_selector = $('#ep_profile_user_list_offline');\n\t\tif (offline_list_selector.length) {\n\t\t\tconst user_selector = $(\".ep_profile_user_row[data-id='user_list_off_Anonymous']\"); // because need anonymous offline be last one\n\t\t\tif (user_selector.length) {\n\t\t\t\tuserElement.insertBefore(user_selector);\n\t\t\t} else {\n\t\t\t\toffline_list_selector.append(userElement);\n\t\t\t}\n\t\t} else {\n\t\t\tconst offline_container = $('#ep_profile_user_list_container_off');\n\t\t\toffline_container.prepend(\"<div class='ep_profile_user_list_date_title' id='ep_profile_user_list_offline'></div>\");\n\t\t\toffline_list_selector = $('#ep_profile_user_list_offline');\n\t\t\toffline_list_selector.append(userElement);\n\t\t}\n\n\t\tuserElement.children('.ep_profile_user_list_profile_userDesc').children('.ep_profile_user_list_username').children('.ep_profile_contributor_status').text('Last seen today');\n\t};\n\n\tconst removeUserElementInUserList = function (userId) {\n\t\t$(`.ep_profile_user_row[data-id=\"user_list_${userId}\"]`).remove();\n\t};\n\n\treturn {\n\t\tcreateHTMLforUserList,\n\t\tincreaseUserFromList,\n\t\tdecreaseUserFromList,\n\t\tmoveOnlineUserToOffline,\n\t\tdecreaseFromOnlineAnonymous,\n\t\tincreaseToOfflineAnonymous,\n\t\tcreateOfflineAnonymousElement,\n\t\tmanageOnlineOfflineUsers,\n\t\tincreaseToOnlineAnonymous,\n\t\tcreateOnlineUserElementInUserList,\n\t\tisThereOnlineAnonymous,\n\t\tcheckUserExistInOnlineAnonymous,\n\t\tcreateOnlineAnonymousElement,\n\t\tremoveUserElementInUserList,\n\n\t}\n\n})();\n","// var shared = require('../shared');\n// var helper = require('../helper');\n\nconst profileForm = (() => {\n\n\tconst showModal = function () {\n\t\t$('#ep_profile_formModal').addClass('ep_profile_formModal_show');\n\t\t$('#ep_profile_formModal_overlay').addClass('ep_profile_formModal_overlay_show');\n\t\t$('#ep_profile_formModal_overlay').css({display: 'block'});\n\t\n\t\tsetTimeout(() => { $('#ep_profile_modalForm_name').focus(); }, 1000);\n\t};\n\tconst hideFormModalOverlay = function () {\n\t\t$('#ep_profile_formModal_overlay').removeClass('ep_profile_formModal_overlay_show');\n\t\t$('#ep_profile_formModal_overlay').css({display: 'none'});\n\t\n\t\thandleOnCloseOverlay();\n\n\t};\n\tconst handleOnCloseOverlay = function () {\n\t\tlet userId = pad.getUserId();\n\t\tlet padId = pad.getPadId();\n\t\tlet $form = $('#ep_profile_formModal_msform');\n\t\tlet data = getFormData($form);\n\t\tlet msg = {};\n\t\tif (data.ep_profile_modalForm_name == '') { return false; }\n\t\t\t// var message = {\n\t\t//     type : 'ep_profile_modal',\n\t\t//     action : \"ep_profile_modal_send_chat_message\" ,\n\t\t//     userId :  userId,\n\t\t//     data: data,\n\t\t//     padId : padId\n\t\t//     }\n\t\t// pad.collabClient.sendMessage(message);  // Send the chat position message to the server\n\t\tlet text = `Please welcome ${data.ep_profile_modalForm_name}`;\n\t\tif (data.ep_profile_modalForm_about_yourself !== '') { text += `, ${data.ep_profile_modalForm_about_yourself}` }\n\t\tif (data.ep_profile_modalForm_homepage !== '') {\n\t\t\tconst url = shared.getValidUrl(data.ep_profile_modalForm_homepage);\n\t\t\ttext += `, <a target='_blank' href='${url}'>${data.ep_profile_modalForm_homepage}</a>`;\n\t\t\t// text += `, ${message.data.ep_profile_modalForm_homepage} `\n\t\t}\n\t\n\t\tmsg.text = `<span><b>${ text }</b></span>`;\n\t\tmsg.target = 'profile';\n\t\tmsg.userId = userId;\n\t\tmsg.time = new Date();\n\t\n\t\t// shared.addTextChatMessage(msg);\n\t\tlet message = {\n\t\t\ttype: 'ep_profile_modal',\n\t\t\taction: 'EP_PROFILE_MODAL_SEND_MESSAGE_TO_CHAT',\n\t\t\tuserId,\n\t\t\tdata: msg,\n\t\t\tpadId,\n\t\t};\n\t\tpad.collabClient.sendMessage(message); // Send the chat position message to the server\n\t};\n\tconst resetModal = function () {\n\t\tlet fieldsets = $('#ep_profile_formModal_msform fieldset');\n\t\tfieldsets.each(function (index) {\n\t\t\tif (index == 0) $(this).show(); else $(this).hide();\n\t\t});\n\t};\n\tconst getFormData = function ($form) {\n\t\tlet unindexed_array = $form.serializeArray();\n\t\tlet indexed_array = {};\n\t\n\t\t$.map(unindexed_array, (n, i) => {\n\t\t\tindexed_array[n.name] = n.value;\n\t\t});\n\t\n\t\treturn indexed_array;\n\t};\n\tconst initModal = function (clientVars) {\n\t\tlet modal = $('#ep_profile_formModal_script').tmpl(clientVars);\n\t\t$('body').append(modal);\n\t\n\t\t// jQuery time\n\t\tlet current_fs, next_fs, previous_fs; // fieldsets\n\t\tlet left, opacity, scale; // fieldset properties which we will animate\n\t\tlet animating; // flag to prevent quick multi-click glitches\n\t\n\t\t$('#ep_profile_formModal_msform fieldset').on('keypress', function (e) {\n\t\t\tif (e.keyCode == 13) {\n\t\t\t\t// Cancel the default action on keypress event\n\t\t\t\te.preventDefault();\n\t\t\t\tcurrent_fs = $(this);\n\t\t\t\tnext_fs = $(this).next();\n\t\t\t\tnextHandler(current_fs, next_fs);\n\t\n\t\t\t}\n\t\t});\n\t\t$('.next').click(function () {\n\t\t\tcurrent_fs = $(this).parent();\n\t\t\tnext_fs = $(this).parent().next();\n\t\t\tnextHandler(current_fs, next_fs);\n\t\n\t\t});\n\t\n\t\t$('.skip').click(function () {\n\t\t\tif (animating) return false;\n\t\t\t$('#ep_profile_modalForm_name').css({border: '1px solid gray'});\n\t\n\t\t\tanimating = true;\n\t\n\t\t\tcurrent_fs = $(this).parent();\n\t\t\tnext_fs = $(this).parent().next();\n\t\n\t\t\t// activate next step on progressbar using the index of next_fs\n\t\t\t// $(\"#progressbar li\").eq($(\"fieldset\").index(next_fs)).addClass(\"active\");\n\t\n\t\t\t// show the next fieldset\n\t\t\tcurrent_fs.hide();\n\t\t\tnext_fs.show();\n\t\t\tanimating = false;\n\t\t\t\t\t});\n\t\n\t\n\t\t$('.close , #ep_profile_formModal_overlay , .ep_profile_formModal_topClose').click(() => {\n\t\t\t$('#ep_profile_formModal').removeClass('ep_profile_formModal_show');\n\t\n\t\t\thideFormModalOverlay();\n\t\n\t\t\treturn false;\n\t\t});\n\t\t$('.previous').click(function () {\n\t\t\tif (animating) return false;\n\t\t\tanimating = true;\n\t\n\t\t\tcurrent_fs = $(this).parent();\n\t\t\tprevious_fs = $(this).parent().prev();\n\t\n\t\t\t// de-activate current step on progressbar\n\t\t\t// $(\"#progressbar li\").eq($(\"fieldset\").index(current_fs)).removeClass(\"active\");\n\t\t\tcurrent_fs.hide();\n\t\t\tprevious_fs.show();\n\t\t\tanimating = false;\n\t\t});\n\t\n\t\t$('.submit').click(() => {\n\t\t\tsubmitHandle();\n\t\t\treturn false;\n\t\t});\n\t\t$('.clear').click(function () {\n\t\t\tshared.resetAllProfileImage($(this).attr('data-userId'), $(this).attr('data-padId'));\n\t\t});\n\t\n\t\tfunction sendFormDataToServer() {\n\t\t\tlet userId = pad.getUserId();\n\t\t\tlet padId = pad.getPadId();\n\t\t\tlet $form = $('#ep_profile_formModal_msform');\n\t\t\tlet data = getFormData($form);\n\t\t\tlet message = {\n\t\t\t\ttype: 'ep_profile_modal',\n\t\t\t\taction: 'ep_profile_modal_info',\n\t\t\t\tuserId,\n\t\t\t\tdata,\n\t\t\t\tpadId,\n\t\t\t\t\t};\n\t\t\tpad.collabClient.sendMessage(message); // Send the chat position message to the server\n\t\t}\n\t\tfunction submitHandle() {\n\t\t\tlet userId = pad.getUserId();\n\t\t\tlet padId = pad.getPadId();\n\t\t\t$('#ep_profile_formModal').removeClass('ep_profile_formModal_show');\n\t\t\thideFormModalOverlay();\n\t\n\t\t\tsendFormDataToServer();\n\t\n\t\t\tlet username = $('#ep_profile_modalForm_name').val();\n\t\n\t\t\thelper.userLogin({\n\t\t\t\temail: $('#ep_profile_modalForm_email').val(),\n\t\t\t\tusername,\n\t\t\t});\n\t\t\tsetTimeout(() => {\n\t\t\t\thelper.refreshUserImage(userId, padId);\n\t\t\t}, 2200);\n\t\t\t// sync profile section to up\n\t\n\t\t}\n\n\t\n\t\tfunction nextHandler(current_fs, next_fs) {\n\t\t\tconsole.log('clicked');\n\t\t\tif (animating) return false;\n\t\n\t\t\tlet currentSection = current_fs.attr('data-section');\n\t\t\tif (currentSection == 'name') {\n\t\t\t\tif ($('#ep_profile_modalForm_name').val() == '') {\n\t\t\t\t\t$('#ep_profile_modalForm_name').css({border: '1px solid red'});\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tvar username = $('#ep_profile_modalForm_name').val();\n\t\t\t\t$('#ep_profile_modalForm_name').css({border: '0px solid gray'});\n\t\t\t\t// submit username once user input and press next\n\t\t\t\thelper.userLogin({\n\t\t\t\t\tusername,\n\t\t\t\t});\n\t\t\t\tshared.loginByEmailAndUsernameWithoutValidation(username, '', false);\n\t\n\t\n\t\t\t}\n\t\t\tif (currentSection == 'email') {\n\t\t\t\tlet userEmail = $('#ep_profile_modalForm_email').val();\n\t\t\t\tif (!shared.isEmail(userEmail) || userEmail == '') {\n\t\t\t\t\t$('#ep_profile_modalForm_email').css({border: '1px solid red'});\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tvar username = $('#ep_profile_modalForm_name').val();\n\t\t\t\tshared.loginByEmailAndUsernameWithoutValidation(username, userEmail, true);\n\t\t\t\tsendEmailVerification(userEmail, username);\n\t\t\t\t$('#ep_profile_modalForm_email').css({border: '0px solid gray'});\n\t\t\t}\n\t\n\t\t\tif (currentSection == 'homepage') {\n\t\t\t\tlet userLink = $('#ep_profile_modal_homepage').val();\n\t\t\t\tconsole.log(shared.IsValid(userLink));\n\t\t\t\tif (!shared.IsValid(userLink) || userLink == '') {\n\t\t\t\t\t$('#ep_profile_modal_homepage').css({border: '1px solid red'});\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\t$('#ep_profile_modal_homepage').css({border: '0px solid gray'});\n\t\t\t\tsendFormDataToServer();\n\t\t\t}\n\t\n\t\t\tif (currentSection == 'image') {\n\t\t\t\tuploadImg();\n\t\t\t}\n\t\n\t\n\t\t\tanimating = true;\n\t\t\tcurrent_fs.hide();\n\t\t\tif (next_fs.length) {\n\t\t\t\tnext_fs.show();\n\t\n\t\t\t\t// focus handling\n\t\t\t\tlet nextSelection = next_fs.attr('data-section');\n\t\t\t\tif (nextSelection == 'email') { $('#ep_profile_modalForm_email').focus().select(); }\n\t\t\t\tif (nextSelection == 'homepage') { $('#ep_profile_modal_homepage').focus().select(); }\n\t\t\t\tif (nextSelection == 'bio') { $('#ep_profile_modalForm_about_yourself').focus().select(); }\n\t\n\t\n\t\t\t} else { // seems last fieldset\n\t\t\t\tsubmitHandle();\n\t\t\t}\n\t\t\tanimating = false;\n\t\t}\n\t\n\t\n\t\tfunction sendEmailVerification(email, username) {\n\t\t\t$.ajax({\n\t\t\t\turl: `/p/${ pad.getPadId() }/pluginfw/ep_profile_modal/sendVerificationEmail/${pad.getUserId()}/${username}/${email}`,\n\t\t\t\ttype: 'get',\n\t\t\t\tdata: {},\n\t\t\t\tcontentType: false,\n\t\t\t\tprocessData: false,\n\t\t\t\tbeforeSend() {\n\t\t\t\t\t\t\t\t\t// setting a timeout\n\t\t\t\t\t\t\t\t\tlet image_url = '../static/plugins/ep_profile_modal/static/img/loading.gif';\n\t\n\t\t\t\t\t\t\t\t\t$('#ep_profile_modal_verification').text('Sending...');\n\t\n\t\t\t\t},\n\t\t\t\terror(xhr) { // if error occured\n\t\t\t\t\t\t\t\t\t$('#ep_profile_modal_verification').text('Error');\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t$('#ep_profile_modal_verification').text(oldText);\n\t\t\t\t\t}, 2000);\n\t\n\t\t\t\t},\n\t\t\t\tsuccess(response) {\n\t\t\t\t\t\t\t\t\t$('#ep_profile_modal_verification').text('Verification email has been sent.');\n\t\t\t\t\t$('#ep_profile_modal_verification').attr('data-verification-status', \"true\");\n\t\t\t\t},\n\t\n\t\t\t});\n\t\t}\n\t\n\t\n\t\n\t\tfunction uploadImg() {\n\t\t\tlet userId = pad.getUserId();\n\t\t\tlet fd = new FormData();\n\t\t\tlet files = $('#profile_file_modal')[0].files[0];\n\t\t\tfd.append('file', files);\n\t\t\tif (!files) return;\n\t\t\t$.ajax({\n\t\t\t\turl: `/p/${ clientVars.padId }/pluginfw/ep_profile_modal/upload/${userId}`,\n\t\t\t\ttype: 'post',\n\t\t\t\tdata: fd,\n\t\t\t\tcontentType: false,\n\t\t\t\tprocessData: false,\n\t\t\t\tbeforeSend() {\n\t\t\t\t\t// setting a timeout\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\thelper.refreshLoadingImage(userId, clientVars.padId);\n\t\n\t\t\t\t},\n\t\t\t\terror(xhr) { // if error occured\n\t\t\t\t\t\t\t\t\thelper.refreshUserImage(userId, clientVars.padId);\n\t\t\t\t\t$('#profile_modal_selected_image').attr('style', (i, style) => {\n\t\t\t\t\t\t\t\t\t\t\treturn style && style.replace(/background-image[^;]+;?/g, '');\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tsuccess(response) {\n\t\t\t\t\t\t\t\t\thelper.refreshUserImage(userId, clientVars.padId);\n\t\n\t\t\t\t\t$('#profile_modal_selected_image').attr('style', (i, style) => {\n\t\t\t\t\t\t\t\t\t\t\treturn style && style.replace(/background-image[^;]+;?/g, '');\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t},\t\t \n\t\n\t\t\t});\n\t\t}\n\t\n\t\n\t\t// upload image profile\n\t\t$('#profile_file_modal').on('change', (e) => {\n\t\t\tlet files = $('#profile_file_modal')[0].files[0];\n\t\n\t\t\tlet url = URL.createObjectURL(files);\n\t\t\t$('#profile_modal_selected_image').css({'background-position': '50% 50%',\n\t\t\t\t'background-image': 'url(' + url + ')', 'background-repeat': 'no-repeat', 'background-size': '64px',\n\t\t\t});\n\t\t});\n\t\n\t};\n\t\n\n\treturn {\n\t\tshowModal,\n\t\thideFormModalOverlay,\n\t\thandleOnCloseOverlay,\n\t\tresetModal,\n\t\tgetFormData,\n\t\tinitModal,\n\n\t}\n})();\n\n\n","// var shared = require('../shared');\n\nconst usersProfileSection = (() => {\n\tconst initiate = function (clientVars) {\n\t\tconst modal = $('#ep_profile_users_profile_script').tmpl(clientVars);\n\t\t$('body').append(modal);\n\t\t// $('#ep_profile_users_profile').addClass('ep_profile_formModal_show')\n\t};\n\t\n\tconst initiateListeners = function () {\n\t\t$('#usersIconList').on('click', '.avatar', function () {\n\t\t\tconsole.log('clicked');\n\t\t\tconst userId = $(this).attr('data-userId');\n\t\t\tconst padId = pad.getPadId();\n\t\t\t$.ajax({\n\t\t\t\turl: `/p/${padId}/pluginfw/ep_profile_modal/getUserInfo/${userId}`,\n\t\t\t\ttype: 'get',\n\t\t\t\tdata: {},\n\t\t\t\tcontentType: false,\n\t\t\t\tprocessData: false,\n\t\t\t\tbeforeSend() {\n\t\t\t\t\tconst image_url = '../static/plugins/ep_profile_modal/static/img/loading.gif';\n\t\t\t\t\t$('#ep_profile_users_profile_userImage').css({'background-position': '50% 50%',\n\t\t\t\t\t\t'background-image': `url(${image_url})`, 'background-repeat': 'no-repeat', 'background-size': '69px', 'background-color': '#3873E0'});\n\t\t\t\t\t$('#ep_profile_users_profile').removeClass('ep_profile_formModal_show');\n\t\t\t\t},\n\t\t\t\terror(xhr) { // if error occured\n\t\n\t\t\t\t},\n\t\t\t\tsuccess(response) {\n\t\t\t\t\tconsole.log(response);\n\t\t\t\t\tconst image_url = `/p/getUserProfileImage/${userId}/${padId}?t=${new Date().getTime()}`;\n\t\t\t\t\tlet username = response.user.username;\n\t\t\t\t\tif (username == null || username == '') { username = 'Anonymous'; }\n\t\t\t\t\tconst about = response.user.about || '';\n\t\t\t\t\tconst homepage = response.user.homepage || '';\n\t\n\t\t\t\t\t$('#ep_profile_users_profile_name').text(username);\n\t\t\t\t\t$('#ep_profile_users_profile_desc').text(about);\n\t\t\t\t\t$('#ep_profile_users_profile_homepage').attr({href: shared.getValidUrl(homepage), target: '_blank'});\n\t\n\t\n\t\t\t\t\t$('#ep_profile_users_profile').addClass('ep_profile_formModal_show');\n\t\t\t\t\tshared.showGeneralOverlay();\n\t\n\t\n\t\t\t\t\t$('#ep_profile_users_profile_userImage').css({'background-position': '50% 50%',\n\t\t\t\t\t\t'background-image': `url(${image_url})`, 'background-repeat': 'no-repeat', 'background-size': '69px', 'background-color': '#3873E0'});\n\t\t\t\t},\n\t\t\t});\n\t\t});\n\t\n\t\t$('#ep_profile_users_profile_close').on('click', () => {\n\t\t\t$('#ep_profile_users_profile').removeClass('ep_profile_formModal_show');\n\t\t\tshared.hideGeneralOverlay();\n\t\t});\n\t};\n\t\n\treturn {\n\t\tinitiate,\n\t\tinitiateListeners,\n\t}\n\t\n})()\n\n","// var usersProfileSection = require('./userProfileSection/userProfileSection');\n// var shared = require('./shared');\n// var helper = require('./helper');\n// var profileForm = require('./profileForm/main');\n// var syncData = require('./syncData');\n\n\nconst postAceInit = (() => {\n\tconst postAceInit = function (hook, context)  {\n\t\t// console.log(\"samir\",pad )\n\t\t// console.log(\"samir\",pad.collabClient )\n\t\t// console.log(\"samir\",pad.collabClient.getConnectedUsers())\n\t\t// /p/getUserProfileImage/${clientVars.userId}?t=${clientVars.serverTimestamp}\n\t\n\t\tusersProfileSection.initiateListeners();\n\t\n\t\t$('#ep_profile_modal_save').on('click', () => {\n\t\t\tconst userId = pad.getUserId();\n\t\t\tconst padId = pad.getPadId();\n\t\t\tconst username = $('#ep_profile_modal-username');\n\t\t\tconst email = $('#ep_profile_modal-email');\n\t\t\tconst about = $('#ep_profile_modal-about');\n\t\t\tconst homepage = $('#ep_profile_modal-homepage');\n\t\t\t// var pushNotification = $(\"#ep_profile_modal_push_notification\").checked;\n\t\t\t// validations\n\t\t\tif (username.val() == '') {\n\t\t\t\tusername.css({border: '1px solid red'});\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tusername.css({border: '0'});\n\t\n\t\t\tconst userEmail = email.val();\n\t\t\tif (!shared.isEmail(userEmail) || userEmail == '') {\n\t\t\t\temail.css({border: '1px solid red'});\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\temail.css({border: '0'});\n\t\n\t\t\tconst userLink = homepage.val();\n\t\t\tconsole.log(shared.IsValid(userLink));\n\t\t\tif (!shared.IsValid(userLink) || userLink == '') {\n\t\t\t\thomepage.css({border: '1px solid red'});\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\thomepage.css({border: '0'});\n\t\n\t\t\t// validations\n\t\n\t\t\tconst $form = $('#ep_profile_modal_one');\n\t\t\tconst data = shared.getFormData($form);\n\t\n\t\t\tconst message = {\n\t\t\t\ttype: 'ep_profile_modal',\n\t\t\t\taction: 'ep_profile_modal_info',\n\t\t\t\tuserId,\n\t\t\t\tdata,\n\t\t\t\tpadId,\n\t\t\t\t};\n\t\t\tpad.collabClient.sendMessage(message); // Send the chat position message to the server\n\t\t\tpad.collabClient.updateUserInfo({\n\t\t\t\tuserId: padId,\n\t\t\t\tname: username.val(),\n\t\t\t\tcolorId: '#b4b39a',\n\t\t\t});\n\t\n\t\t\t// //\n\t\t\tif (window.user_status == 'login') {\n\t\t\t\tif ($('#ep_profile_modal').hasClass('ep_profile_modal-show')) {\n\t\t\t\t\t$('#ep_profile_modal').removeClass('ep_profile_modal-show');\n\t\t\t\t\tshared.hideGeneralOverlay();\n\t\t\t\t} else {\n\t\t\t\t\t$('#ep_profile_modal').addClass('ep_profile_modal-show');\n\t\n\t\t\t\t\t$('#online_ep_profile_modal_status').show();\n\t\t\t\t\t$('#offline_ep_profile_modal_status').hide();\n\t\n\t\t\t\t\tshared.showGeneralOverlay();\n\t\t\t\t}\n\t\t\t}\n\t\t\t// else{\n\t\t\t// \t($('#ep_profile_modal_ask').hasClass('ep_profile_modal-show'))?\n\t\t\t// \t$('#ep_profile_modal_ask').removeClass('ep_profile_modal-show')\n\t\t\t// \t:\n\t\t\t// \t$('#ep_profile_modal_ask').addClass('ep_profile_modal-show')\n\t\t\t// }\n\t\t});\n\t\n\t\t$('#userlist_count,#ep_profile_modal_user_list_close').on('click', () => {\n\t\t\tif ($('#ep_profile_modal_user_list').hasClass('ep_profile_modal-show')) {\n\t\t\t\t$('#ep_profile_modal_user_list').removeClass('ep_profile_modal-show');\n\t\t\t\tshared.hideGeneralOverlay();\n\t\t\t} else {\n\t\t\t\tshared.showGeneralOverlay();\n\t\t\t\t$('#ep_profile_modal_user_list').addClass('ep_profile_modal-show');\n\t\t\t}\n\t\t});\n\t\n\t\t$('#ep_profile_modal_verification').on('click', function () {\n\t\t\tconst verificationStatus = $(this).attr('data-verification-status');\n\t\t\tconst oldText = $(this).text();\n\t\t\tif (verificationStatus != 'true') {\n\t\t\t\t$.ajax({\n\t\t\t\t\turl: `/p/${pad.getPadId()}/pluginfw/ep_profile_modal/sendVerificationEmail/${pad.getUserId()}/null/null`,\n\t\t\t\t\ttype: 'get',\n\t\t\t\t\tdata: {},\n\t\t\t\t\tcontentType: false,\n\t\t\t\t\tprocessData: false,\n\t\t\t\t\tbeforeSend() {\n\t\t\t\t\t\t// setting a timeout\n\t\t\t\t\t\tconst image_url = '../static/plugins/ep_profile_modal/static/img/loading.gif';\n\t\n\t\t\t\t\t\t$('#ep_profile_modal_verification').text('Sending...');\n\t\t\t\t\t},\n\t\t\t\t\terror(xhr) { // if error occured\n\t\t\t\t\t\t$('#ep_profile_modal_verification').text('Error');\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t$('#ep_profile_modal_verification').text(oldText);\n\t\t\t\t\t\t}, 2000);\n\t\t\t\t\t},\n\t\t\t\t\tsuccess(response) {\n\t\t\t\t\t\t$('#ep_profile_modal_verification').text('Verification email has been sent.');\n\t\t\t\t\t\t$('#ep_profile_modal_verification').attr('data-verification-status', 'true');\n\t\t\t\t\t},\n\t\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn false;\n\t\t});\n\t\t$('#ep_profile_modal_share').on('click', () => {\n\t\t\tconst dummy = document.createElement('input');\n\t\t\tconst text = window.location.href;\n\t\n\t\t\tdocument.body.appendChild(dummy);\n\t\t\tdummy.value = text;\n\t\t\tdummy.select();\n\t\t\tdocument.execCommand('copy');\n\t\t\tdocument.body.removeChild(dummy);\n\t\t\t$.gritter.add({\n\t\t\t\ttext: 'Link copied to clipboard',\n\t\t\t\t});\n\t\t});\n\t\n\t\t$('#ep-profile-button').on('click', () => {\n\t\t\tif (window.user_status == 'login') {\n\t\t\t\tif ($('#ep_profile_modal').hasClass('ep_profile_modal-show')) {\n\t\t\t\t\t$('#ep_profile_modal').removeClass('ep_profile_modal-show');\n\t\t\t\t} else {\n\t\t\t\t\t$('#ep_profile_modal').addClass('ep_profile_modal-show');\n\t\t\t\t\t$('#online_ep_profile_modal_status').show();\n\t\t\t\t\t$('#offline_ep_profile_modal_status').hide();\n\t\t\t\t\tshared.showGeneralOverlay();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// ($('#ep_profile_modal_ask').hasClass('ep_profile_modal-show'))?\n\t\t\t\t// $('#ep_profile_modal_ask').removeClass('ep_profile_modal-show')\n\t\t\t\t// :\n\t\t\t\t// $('#ep_profile_modal_ask').addClass('ep_profile_modal-show')\n\t\t\t\tprofileForm.resetModal();\n\t\n\t\t\t\tprofileForm.showModal();\n\t\t\t}\n\t\t\t});\n\t\n\t\t$('#ep_profile_modal_close').on('click', () => {\n\t\t\tif ($('#ep_profile_modal').hasClass('ep_profile_modal-show')) {\n\t\t\t\t$('#ep_profile_modal').removeClass('ep_profile_modal-show');\n\t\t\t\tshared.hideGeneralOverlay();\n\t\t\t} else {\n\t\t\t\tshared.showGeneralOverlay();\n\t\t\t\t$('#ep_profile_modal').addClass('ep_profile_modal-show');\n\t\t\t}\n\t\t});\n\t\t$('#ep_profile_modal_close_ask').on('click', () => {\n\t\t\t($('#ep_profile_modal_ask').hasClass('ep_profile_modal-show'))\n\t\t\t\t? $('#ep_profile_modal_ask').removeClass('ep_profile_modal-show')\n\t\t\t\t:\t\t$('#ep_profile_modal_ask').addClass('ep_profile_modal-show');\n\t\t});\n\t\n\t\n\t\t\t$('#ep_profile_modal_signout').on('click', () => {\n\t\t\tconst userId = pad.getUserId();\n\t\t\tconst padId = pad.getPadId();\n\t\t\twindow.user_status = 'out';\n\t\t\tconst message = {\n\t\t\t\ttype: 'ep_profile_modal',\n\t\t\t\taction: 'ep_profile_modal_logout',\n\t\t\t\temail: $('#ep_profile_hidden_email').val(),\n\t\t\t\tuserId,\n\t\t\t\tpadId,\n\t\n\t\t\t\t};\n\t\t\tpad.collabClient.sendMessage(message); // Send the chat position message to the server\n\t\t\t$('#ep_profile_modal').removeClass('ep_profile_modal-show');\n\t\t\t$('#online_ep_profile_modal_status').hide();\n\t\t\t$('#offline_ep_profile_modal_status').show();\n\t\t\t// $('#ep_profile_modal_ask').addClass('ep_profile_modal-show')\n\t\t\tsyncData.resetProfileModalFields();\n\t\t\t// $('#ep_profile_modal').addClass('ep_profile_modal-show')\n\t\t\t// shared.showGeneralOverlay()\n\t\t\tshared.hideGeneralOverlay();\n\t\t\t// shared.sendSignOutMessage(userId,padId)\n\t\t\t$(`.avatar[data-id=\"user_${userId}\"]`).attr({style: ''});\n\t\t\thelper.userLogout();\n\t\t\t});\n\t\n\t\n\t\t// upload image profile\n\t\t$('#profile_file').on('change', (e) => {\n\t\t\tconst userId = pad.getUserId();\n\t\t\tconst fd = new FormData();\n\t\t\tconst files = $('#profile_file')[0].files[0];\n\t\t\tfd.append('file', files);\n\t\t\tif (!files) return;\n\t\t\t$.ajax({\n\t\t\t\turl: `/p/${clientVars.padId}/pluginfw/ep_profile_modal/upload/${userId}`,\n\t\t\t\ttype: 'post',\n\t\t\t\tdata: fd,\n\t\t\t\tcontentType: false,\n\t\t\t\tprocessData: false,\n\t\t\t\tbeforeSend() {\n\t\t\t\t\t// setting a timeout\n\t\t\t\t\thelper.refreshLoadingImage(userId, clientVars.padId);\n\t\t\t\t},\n\t\t\t\terror(xhr) { // if error occured\n\t\t\t\t\thelper.refreshUserImage(userId, clientVars.padId);\n\t\t\t\t},\n\t\t\t\tsuccess(response) {\n\t\t\t\t\thelper.refreshUserImage(userId, clientVars.padId);\n\t\t\t\t},\n\t\n\t\t\t});\n\t\t});\n\t\n\t\t$('#ep_profile_modal_submit').on('click', () => {\n\t\t\tconst username = $('#ep_profile_modal_username').val();\n\t\t\tconst email = $('#ep_profile_modal_email').val();\n\t\n\t\t\tshared.loginByEmailAndUsername(username, email);\n\t\t});\n\t\n\t\t$('#ep_profile_modal_login').on('click', () => {\n\t\t\tconst username = $('#ep_profile_modal-username').val();\n\t\t\tconst email = $('#ep_profile_modal-email').val();\n\t\n\t\t\tshared.loginByEmailAndUsername(username, email);\n\t\t\t$('#ep_profile_modal').removeClass('ep_profile_modal-show');\n\t\t});\n\t\n\t\t$('#ep_profile_general_overlay').on('click', () => {\n\t\t\tshared.hideGeneralOverlay();\n\t\t});\n\t\n\t\treturn [];\n\t};\n\treturn postAceInit\n})();\n\n","// var contributors = require('./contributors/contributors');\n// var profileForm = require('./profileForm/main');\n// var usersProfileSection = require('./userProfileSection/userProfileSection');\n\n\n\nconst aceInitialized = (() => {\n\n\tconst aceInitialized = (hook, context) => {\n\t\tconst userId = pad.getUserId();\n\t\t// if (!window.matchMedia('(max-width: 720px)').matches) {\n\t\tlet modal = $('#ep_profile_askmodal_script').tmpl(clientVars);\n\t\tprofileForm.initModal(clientVars);\n\t\tif (clientVars.ep_profile_modal.form_passed !== true) {\n\t\t\tprofileForm.showModal();\n\t\t}\n\t\t// / user profile section\n\t\tusersProfileSection.initiate(clientVars);\n\t\t// / user profile section\n\t\n\t\t//\n\t\t$('body').append(modal);\n\t\t// /\n\t\tmodal = $('#ep_profile_modal_script').tmpl(clientVars);\n\t\t$('body').append(modal);\n\t\t// /\n\t\tmodal = $('#ep_profile_modal_user_list_script').tmpl(clientVars);\n\t\t$('body').append(modal);\n\t\t// /general\n\t\tmodal = $('#ep_profile_modal_general_script').tmpl(clientVars);\n\t\t$('body').append(modal);\n\t\tconst style = `background : url(/p/getUserProfileImage/${userId}/${clientVars.padId}) no-repeat 50% 50% ; background-size :32px`;\n\t\tconst onlineUsers = pad.collabClient.getConnectedUsers();\n\t\tconst usersListHTML = contributors.createHTMLforUserList(clientVars.ep_profile_modal.contributed_authors_count, onlineUsers, clientVars.padId, clientVars.ep_profile_modal.verified_users);\n\t\tif (clientVars.ep_profile_modal.user_status == '2') {\n\t\t\twindow.user_status = 'login';\n\t\t\t$('#pad_title').append(`<div class='ep_profile_modal_header'><div class='userlist' id='userlist'>${usersListHTML}</div><div class='ep-profile-button' id='ep-profile-button'><div id='ep-profile-image' style='${style}' /></div></div>`);\n\t\t} else {\n\t\t\t$('#pad_title').append(`<div class='ep_profile_modal_header'><div class='userlist' id='userlist'>${usersListHTML} </div><div class='ep-profile-button' id='ep-profile-button'><div id='ep-profile-image'  style='${style}' /></div></div>`);\n\t\t\twindow.user_status = 'out';\n\t\t\tif (clientVars.ep_profile_modal.form_passed == true) {\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tprofileForm.showModal();\n\t\n\t\t\t\t\t// $('#ep_profile_modal_ask').addClass('ep_profile_modal-show')\n\t\t\t\t}, 1000);\n\t\t\t}\n\t\t}\n\t\tconst message = {\n\t\t\ttype: 'ep_profile_modal',\n\t\t\taction: 'ep_profile_modal_ready',\n\t\t\tuserId,\n\t\t\tpadId: pad.getPadId(),\n\t\t\tdata: clientVars.ep_profile_modal,\n\t\t};\n\t\tpad.collabClient.sendMessage(message);\n\t\tif (clientVars.ep_profile_modal.userName == 'Anonymous') {\n\t\t\tpad.collabClient.updateUserInfo({\n\t\t\t\tuserId,\n\t\t\t\tname: 'Anonymous',\n\t\t\t\tcolorId: '#b4b39a',\n\t\t\t});\n\t\t}\n\t\t// }\n\t\n\t\n\t\treturn [];\n\t};\n\t\n\treturn aceInitialized\n\t\n})();\n\n","// var helper = require('./helper');\n// var contributors = require('./contributors/contributors');\n// var syncData = require('./syncData');\n// var shared = require('./shared');\n\n\nconst handleClientMessage = (() => {\n\tconst handleClientMessage_USER_NEWINFO = (hook, context) => {\n\t\tconst padId = pad.getPadId();\n\t\n\t\tcontributors.increaseUserFromList(context.payload.userId, padId);\n\t\treturn [];\n\t};\n\tconst handleClientMessage_USER_LEAVE = (hook, context) => {\n\t\tconst padId = pad.getPadId();\n\t\n\t\tcontributors.decreaseUserFromList(context.payload.userId, padId);\n\t\treturn [];\n\t};\n\tconst handleClientMessage_CUSTOM = (hook, context, cb) => {\n\t\tconst current_user_id = pad.getUserId();\n\t\n\t\tif (context.payload.action == 'totalUserHasBeenChanged') {\n\t\t\tconst totalUserCount = context.payload.totalUserCount;\n\t\t\t$('#userlist_count').text(totalUserCount);\n\t\t\t// var style = \"background : url(/p/getUserProfileImage/\"+current_user_id+\"/\"+ clientVars.padId +\") no-repeat 50% 50% ; background-size :32px\"\n\t\t\t// var onlineUsers = pad.collabClient.getConnectedUsers();\n\t\t\t// var usersListHTML = contributors.createHTMLforUserList( context.payload.totalUserCount,onlineUsers,context.payload.padId,\n\t\t\t// context.payload.verified_users)\n\t\t\t// $(\"#pad_title\").append(\"<div class='ep_profile_modal_header'><div class='userlist' id='userlist'>\"+usersListHTML+\"</div><div class='ep-profile-button' id='ep-profile-button'><div id='ep-profile-image' style='\"+style+\"' /></div></div>\")\n\t\t\t// var tmplObject = {\n\t\t\t// \tonlineUsers : onlineUsers.reverse(),\n\t\t\t// \ttotalUserCount : context.payload.totalUserCount ,\n\t\t\t// \tpadId : context.payload.padId,\n\t\t\t// \tverified_users : context.payload.verified_users\n\t\t\t// }\n\t\t\t// modal = $(\"#ep_profile_modal_user_list_script\").tmpl(tmplObject,\n\t\t\t// \t{\n\t\t\t// \t  isInArray: function (items , needle) {\n\t\t\t// \t\treturn items.indexOf(needle);\n\t\t\t// \t  }\n\t\t\t// \t});\n\t\t}\n\t\n\t\tif (context.payload.action == 'EP_PROFILE_MODAL_PROMPT_DATA') { // when we quess user by exist data prompt\n\t\t\t// if (confirm('Do you want to prefill your existing data?')) {\n\t\t\t// \t//for set image\n\t\t\t// \tif (context.payload.data.image){\n\t\t\t// \t\tvar message = {\n\t\t\t// \t\t\ttype : 'ep_profile_modal',\n\t\t\t// \t\t\taction : \"ep_profile_modal_prefill\" ,\n\t\t\t// \t\t\tuserId :  context.payload.userId,\n\t\t\t// \t\t\tdata: context.payload.data,\n\t\t\t// \t\t\tpadId : context.payload.padId\n\t\t\t// \t\t  }\n\t\t\t// \t\tpad.collabClient.sendMessage(message);  // Send the chat position message to the server\n\t\t\t// \t}\n\t\n\t\t\t// \t$(\"#ep_profile_modal_homepage\").val(context.payload.data.homepage)\n\t\t\t// \t$(\"#ep_profile_modalForm_about_yourself\").val(context.payload.data.about)\n\t\t\t// \t$(\"#profile_modal_selected_image\").css({\"background-position\":\"50% 50%\",\n\t\t\t// \t\"background-image\":\"url(\"+context.payload.data.image+\")\" , \"background-repeat\":\"no-repeat\",\"background-size\": \"64px\"\n\t\t\t// \t});\n\t\t\t// \t// Save it!\n\t\t\t// }else{\n\t\t\t// \tvar message = {\n\t\t\t// \t\ttype : 'ep_profile_modal',\n\t\t\t// \t\taction : \"ep_profile_modal_prefill\" ,\n\t\t\t// \t\tuserId :  context.payload.userId,\n\t\t\t// \t\tdata: {\n\t\t\t// \t\t\timage:\"\"\n\t\t\t// \t\t},\n\t\t\t// \t\tpadId : context.payload.padId\n\t\t\t// \t  }\n\t\t\t// \tpad.collabClient.sendMessage(message);\n\t\t\t// }\n\t\t\tvar image_url = `/p/getUserProfileImage/${context.payload.userId}/${context.payload.padId}?t=${new Date().getTime()}`;\n\t\t\t$('#ep_profile_modal_homepage').val(context.payload.data.homepage);\n\t\t\t$('#ep_profile_modalForm_about_yourself').val(context.payload.data.about);\n\t\t\t$('#profile_modal_selected_image').css({'background-position': '50% 50%',\n\t\t\t\t'background-image': `url(${image_url})`, 'background-repeat': 'no-repeat', 'background-size': '64px'});\n\t\t}\n\t\tif (context.payload.action == 'EP_PROFILE_USERS_LIST') {\n\t\t\tconst onlineUsers = pad.collabClient.getConnectedUsers();\n\t\t\tcontributors.manageOnlineOfflineUsers(context.payload.list, onlineUsers, pad.getUserId());\n\t\t}\n\t\n\t\tif (context.payload.action == 'EP_PROFILE_USER_IMAGE_CHANGE') { // when user A change image and user B want to know\n\t\t\thelper.refreshGeneralImage(context.payload.userId, context.payload.padId);\n\t\t}\n\t\n\t\tif (context.payload.action == 'EP_PROFILE_USER_LOGOUT_UPDATE') {\n\t\t\tvar image_url = `/p/getUserProfileImage/${context.payload.userId}/${context.payload.padId}?t=${new Date().getTime()}`;\n\t\n\t\t\tif (current_user_id == context.payload.userId) {\n\t\t\t\thelper.refreshUserImage(current_user_id, context.payload.padId);\n\t\t\t\thelper.logoutCssFix(current_user_id);\n\t\n\t\t\t\t//\t\t\t$(\"#ep_profile_modal_section_info_name\").text(context.payload.userName);\n\t\t\t} else {\n\t\t\t\thelper.refreshGeneralImage(context.payload.userId, context.payload.padId);\n\t\t\t}\n\t\n\t\t\tsyncData.resetGeneralFields(context.payload.userId);\n\t\n\t\t\t// making user as anonymous\n\t\t\tvar online_anonymous_selector = contributors.isThereOnlineAnonymous();\n\t\t\tif (online_anonymous_selector) {\n\t\t\t\tcontributors.increaseToOnlineAnonymous(online_anonymous_selector, context.payload.userId);\n\t\t\t} else {\n\t\t\t\tcontributors.createOnlineAnonymousElement(context.payload.userId, 'Anonymous', image_url, {});\n\t\t\t}\n\t\n\t\t\tcontributors.removeUserElementInUserList(context.payload.userId);\n\t\t}\n\t\n\t\tif (context.payload.action == 'EP_PROFILE_MODAL_SEND_MESSAGE_TO_CHAT') {\n\t\t\tshared.addTextChatMessage(context.payload.msg);\n\t\t}\n\t\tif (context.payload.action == 'EP_PROFILE_USER_LOGIN_UPDATE') {\n\t\t\t// ///////////////// related to user list when user has been loginned\n\t\t\tvar online_anonymous_selector = contributors.isThereOnlineAnonymous();\n\t\t\tif (context.payload.userName == 'Anonymous') {\n\t\t\t\tif (online_anonymous_selector) {\n\t\t\t\t\tcontributors.increaseToOnlineAnonymous(online_anonymous_selector, context.payload.userId);\n\t\t\t\t} else {\n\t\t\t\t\tcontributors.createOnlineAnonymousElement(context.payload.userId, context.payload.userName, context.payload.img, context.payload.user);\n\t\t\t\t}\n\t\n\t\t\t\tcontributors.removeUserElementInUserList(context.payload.userId);\n\t\t\t} else {\n\t\t\t\tif (online_anonymous_selector) {\n\t\t\t\t\tif (contributors.checkUserExistInOnlineAnonymous(online_anonymous_selector, context.payload.userId)) {\n\t\t\t\t\t\tcontributors.decreaseFromOnlineAnonymous(online_anonymous_selector, context.payload.userId);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tcontributors.createOnlineUserElementInUserList(context.payload.userId, context.payload.userName, context.payload.img, current_user_id, context.payload.user);\n\t\t\t}\n\t\n\t\n\t\t\t// change owner loginned img at top of page\n\t\t\tif (current_user_id == context.payload.userId) {\n\t\t\t\thelper.refreshUserImage(current_user_id, context.payload.padId);\n\t\t\t\tsyncData.syncAllFormsData(context.payload.userId, context.payload.user);\n\t\n\t\t\t\t// $(\"#ep_profile_modal_section_info_name\").text(context.payload.userName);\n\t\t\t} else {\n\t\t\t\thelper.refreshGeneralImage(context.payload.userId, context.payload.padId);\n\t\t\t\tsyncData.syncGeneralFormsData(context.payload.userId, context.payload.user);\n\t\t\t}\n\t\t}\n\t\n\t\treturn [];\n\t};\n\treturn {\n\t\thandleClientMessage_USER_NEWINFO,\n\t\thandleClientMessage_USER_LEAVE,\n\t\thandleClientMessage_CUSTOM,\n\n\t}\n})();\n\n","const helper = (() => {\n\tconst userLogin = function (data) {\n\t\twindow.user_status = \"login\";\n\t\tpad.collabClient.updateUserInfo({\n\t\t\tuserId: pad.getUserId(),\n\t\t\tname: data.username,\n\t\t\tcolorId: \"#b4b39a\",\n\t\t});\n\t};\n\tconst userLogout = function () {\n\t\twindow.user_status = \"logout\";\n\t\tpad.collabClient.updateUserInfo({\n\t\t\tuserId: pad.getUserId(),\n\t\t\tname: \"Anonymous\",\n\t\t\tcolorId: \"#b4b39a\",\n\t\t});\n\t};\n\tconst logoutCssFix = function (userId) {\n\t\tconst avatar = $(`.avatarImg[data-id=\"user_${userId}\"]`);\n\t\tif (avatar.length) {\n\t\t\tavatar.css({ margin: \"0px\", \"box-shadow\": \"none\" });\n\t\t}\n\t};\n\tconst refreshUserImage = function (userId, padId) {\n\t\tconst image_url = `/p/getUserProfileImage/${userId}/${padId}?t=${new Date().getTime()}`;\n\t\tconst avatar = $(`.avatarImg[data-id=\"user_${userId}\"]`);\n\t\tif (avatar.length) {\n\t\t\tavatar.css({\n\t\t\t\t\"background-position\": \"50% 50%\",\n\t\t\t\t\"background-image\": `url(${image_url})`,\n\t\t\t\t\"background-repeat\": \"no-repeat\",\n\t\t\t\t\"background-size\": \"28px\",\n\t\t\t\t\"background-color\": \"#fff\",\n\t\t\t});\n\t\t}\n\t\t$(\".ep_profile_modal_section_image_big_ask\").css({\n\t\t\t\"background-position\": \"50% 50%\",\n\t\t\t\"background-image\": `url(${image_url})`,\n\t\t\t\"background-repeat\": \"no-repeat\",\n\t\t});\n\t\t$(\".ep_profile_modal_section_image_big\").css({\n\t\t\t\"background-position\": \"50% 50%\",\n\t\t\t\"background-image\": `url(${image_url})`,\n\t\t\t\"background-repeat\": \"no-repeat\",\n\t\t\t\"background-size\": \"72px\",\n\t\t});\n\t\t$(\"#ep-profile-image\").css({\n\t\t\t\"background-position\": \"50% 50%\",\n\t\t\t\"background-image\": `url(${image_url})`,\n\t\t\t\"background-repeat\": \"no-repeat\",\n\t\t\t\"background-size\": \"32px\",\n\t\t});\n\n\t\tconst user_selector = $(\n\t\t\t`.ep_profile_user_row[data-id=\"user_list_${userId}\"]`\n\t\t);\n\t\tif (user_selector.length) {\n\t\t\tuser_selector\n\t\t\t\t.children(\".ep_profile_user_img\")\n\t\t\t\t.css({\n\t\t\t\t\t\"background-position\": \"50% 50%\",\n\t\t\t\t\t\"background-image\": `url(${image_url})`,\n\t\t\t\t\t\"background-repeat\": \"no-repeat\",\n\t\t\t\t\t\"background-size\": \"69px\",\n\t\t\t\t});\n\t\t}\n\t};\n\n\tconst refreshLoadingImage = function (userId, padId) {\n\t\tconst image_url =\n\t\t\t\"../static/plugins/ep_profile_modal/static/img/loading.gif\";\n\t\tconst avatar = $(`.avatarImg[data-id=\"user_${userId}\"]`);\n\t\tif (avatar.length) {\n\t\t\tavatar.css({\n\t\t\t\t\"background-position\": \"50% 50%\",\n\t\t\t\t\"background-image\": `url(${image_url})`,\n\t\t\t\t\"background-repeat\": \"no-repeat\",\n\t\t\t\t\"background-size\": \"28px\",\n\t\t\t\t\"background-color\": \"#fff\",\n\t\t\t});\n\t\t}\n\t\t$(\".ep_profile_modal_section_image_big_ask\").css({\n\t\t\t\"background-position\": \"50% 50%\",\n\t\t\t\"background-image\": `url(${image_url})`,\n\t\t\t\"background-repeat\": \"no-repeat\",\n\t\t});\n\t\t$(\".ep_profile_modal_section_image_big\").css({\n\t\t\t\"background-position\": \"50% 50%\",\n\t\t\t\"background-image\": `url(${image_url})`,\n\t\t\t\"background-repeat\": \"no-repeat\",\n\t\t\t\"background-size\": \"72px\",\n\t\t});\n\t\t$(\"#ep-profile-image\").css({\n\t\t\t\"background-position\": \"50% 50%\",\n\t\t\t\"background-image\": `url(${image_url})`,\n\t\t\t\"background-repeat\": \"no-repeat\",\n\t\t\t\"background-size\": \"32px\",\n\t\t});\n\n\t\tconst user_selector = $(\n\t\t\t`.ep_profile_user_row[data-id=\"user_list_${userId}\"]`\n\t\t);\n\t\tif (user_selector.length) {\n\t\t\tuser_selector\n\t\t\t\t.children(\".ep_profile_user_img\")\n\t\t\t\t.css({\n\t\t\t\t\t\"background-position\": \"50% 50%\",\n\t\t\t\t\t\"background-image\": `url(${image_url})`,\n\t\t\t\t\t\"background-repeat\": \"no-repeat\",\n\t\t\t\t\t\"background-size\": \"69px\",\n\t\t\t\t});\n\t\t}\n\t};\n\n\tconst refreshGeneralImage = function (userId, padId) {\n\t\tconst image_url = `/p/getUserProfileImage/${userId}/${padId}?t=${new Date().getTime()}`;\n\t\tconst avatar = $(`.avatarImg[data-id=\"user_${userId}\"]`);\n\t\tif (avatar.length) {\n\t\t\tavatar.css({\n\t\t\t\t\"background-position\": \"50% 50%\",\n\t\t\t\t\"background-image\": `url(${image_url})`,\n\t\t\t\t\"background-repeat\": \"no-repeat\",\n\t\t\t\t\"background-size\": \"28px\",\n\t\t\t\t\"background-color\": \"#fff\",\n\t\t\t});\n\t\t}\n\t\tconst user_selector = $(\n\t\t\t`.ep_profile_user_row[data-id=\"user_list_${userId}\"]`\n\t\t);\n\t\tif (user_selector.length) {\n\t\t\tuser_selector\n\t\t\t\t.children(\".ep_profile_user_img\")\n\t\t\t\t.css({\n\t\t\t\t\t\"background-position\": \"50% 50%\",\n\t\t\t\t\t\"background-image\": `url(${image_url})`,\n\t\t\t\t\t\"background-repeat\": \"no-repeat\",\n\t\t\t\t\t\"background-size\": \"69px\",\n\t\t\t\t});\n\t\t}\n\t};\n\n\treturn {\n\t\tuserLogin,\n\t\tuserLogout,\n\t\tlogoutCssFix,\n\t\trefreshUserImage,\n\t\trefreshLoadingImage,\n\t\trefreshGeneralImage,\n\t};\n})();\n","// var helper = require('./helper');\n\n\nconst shared = (() => {\n\n\tconst resetAllProfileImage = function (userId, padId) {\n\t\t$.ajax({\n\t\t\turl: `/p/${padId}/pluginfw/ep_profile_modal/resetProfileImage/${userId}`,\n\t\t\ttype: 'get',\n\t\t\tdata: {},\n\t\t\tcontentType: false,\n\t\t\tprocessData: false,\n\t\t\tbeforeSend() {\n\t\t\t\thelper.refreshLoadingImage(userId, padId);\n\t\t\t},\n\t\t\terror(xhr) { // if error occured\n\t\t\t\thelper.refreshUserImage(userId, padId);\n\t\t\t},\n\t\t\tsuccess(response) {\n\t\t\t\thelper.refreshUserImage(userId, padId);\n\t\t\t},\n\t\n\t\t});\n\t};\n\tconst sendSignOutMessage = function (userId, padId) {\n\t\tconst message = {\n\t\t\ttype: 'ep_profile_modal',\n\t\t\taction: 'ep_profile_modal_send_signout_message',\n\t\t\tuserId,\n\t\t\tpadId,\n\t\n\t\t};\n\t\tpad.collabClient.sendMessage(message); // Send the chat position message to the server\n\t};\n\tconst addTextChatMessage = function (msg) {\n\t\tconst authorClass = `author-${msg.userId.replace(/[^a-y0-9]/g, (c) => {\n\t\t\tif (c === '.') return '-';\n\t\t\treturn `z${c.charCodeAt(0)}z`;\n\t\t})}`;\n\t\n\t\t// create the time string\n\t\tlet minutes = `${new Date(msg.time).getMinutes()}`;\n\t\tlet hours = `${new Date(msg.time).getHours()}`;\n\t\tif (minutes.length === 1) minutes = `0${minutes}`;\n\t\tif (hours.length === 1) hours = `0${hours}`;\n\t\tconst timeStr = `${hours}:${minutes}`;\n\t\n\t\tconst html = `<p><span class='time ${authorClass}'>${timeStr}</span> ${msg.text}</p>`;\n\t\n\t\t$(document).find('#chatbox #chattext').append(html);\n\t\tscrollDownToLastChatText('#chatbox #chattext');\n\t};\n\tconst scrollDownToLastChatText = function scrollDownToLastChatText(selector) {\n\t\tconst $element = $(selector);\n\t\tif ($element.length <= 0 || !$element[0]) return true;\n\t\t$element.animate({scrollTop: $element[0].scrollHeight}, {duration: 400, queue: false});\n\t};\n\t\n\tconst loginByEmailAndUsernameWithoutValidation = function (username, email, suggestData) {\n\t\twindow.user_status = 'login';\n\t\tconst message = {\n\t\t\ttype: 'ep_profile_modal',\n\t\t\taction: 'ep_profile_modal_login',\n\t\t\temail,\n\t\t\tuserId: pad.getUserId(),\n\t\t\tname: username,\n\t\t\tpadId: pad.getPadId(),\n\t\t\tsuggestData,\n\t\t};\n\t\tpad.collabClient.sendMessage(message); // Send the chat position message to the server\n\t};\n\tconst loginByEmailAndUsername = function (username, email) {\n\t\tif (username == '' || !isEmail(email)) {\n\t\t\tif (!isEmail(email)) {\n\t\t\t\t$('#ep_profile_modal_email').focus();\n\t\t\t\t$('#ep_profile_modal_email').addClass('ep_profile_modal_validation_error');\n\t\t\t}\n\t\t\treturn false;\n\t\t} else {\n\t\t\t$('#ep_profile_modal_email').removeClass('ep_profile_modal_validation_error');\n\t\n\t\t\twindow.user_status = 'login';\n\t\t\t// pad.collabClient.updateUserInfo({\n\t\t\t//     userId :  pad.getUserId() ,\n\t\t\t//     name: username,\n\t\t\t//     colorId: \"#b4b39a\"\n\t\t\t// } )\n\t\t\tconst message = {\n\t\t\t\ttype: 'ep_profile_modal',\n\t\t\t\taction: 'ep_profile_modal_login',\n\t\t\t\temail,\n\t\t\t\tuserId: pad.getUserId(),\n\t\t\t\tname: username,\n\t\t\t\tpadId: pad.getPadId(),\n\t\t\t\tsuggestData: false,\n\t\n\t\t\t};\n\t\t\tpad.collabClient.sendMessage(message); // Send the chat position message to the server\n\t\t\t// $('#ep_profile_modal').addClass('ep_profile_modal-show')\n\t\t\thelper.userLogin({\n\t\t\t\temail,\n\t\t\t\tusername,\n\t\t\t});\n\t\n\t\t\t$('#online_ep_profile_modal_status').show();\n\t\t\t$('#offline_ep_profile_modal_status').hide();\n\t\t\t// $('#ep_profile_modal_ask').removeClass('ep_profile_modal-show')\n\t\t\t// $(\"#ep_profile_modal_section_info_email\").text(email)\n\t\t\t// $(\"#ep_profile_modal_section_info_name\").text(username)\n\t\t}\n\t};\n\t\n\t\n\tconst isEmail = function (email) {\n\t\tconst regex = /^([a-zA-Z0-9_.+-])+\\@(([a-zA-Z0-9-])+\\.)+([a-zA-Z0-9]{2,4})+$/;\n\t\tif (email == '') { return true; } else { return regex.test(email); }\n\t};\n\t\n\tconst IsValid = function (url) {\n\t\tconst pattern = /^(http:\\/\\/www\\.|https:\\/\\/www\\.|http:\\/\\/|https:\\/\\/)?[a-z0-9]+([\\-\\.]{1}[a-z0-9]+)*\\.[a-z]{2,5}(:[0-9]{1,5})?(\\/.*)?$/;\n\t\treturn pattern.test(url);\n\t};\n\t\n\t\n\tconst getFormData = function ($form) {\n\t\tconst unindexed_array = $form.serializeArray();\n\t\tconst indexed_array = {};\n\t\n\t\t$.map(unindexed_array, (n, i) => {\n\t\t\tindexed_array[n.name] = n.value;\n\t\t});\n\t\n\t\treturn indexed_array;\n\t};\n\tconst setFormData = function ($form, indexed_array) {\n\t\t$.map(indexed_array, (n, i) => {\n\t\t\t$(`#${i}`).val(n);\n\t\t});\n\t};\n\t\n\tconst isUsername = function (username) {\n\t\tconst regex = /^([a-zA-Z0-9_.+-])/;\n\t\treturn regex.test(username);\n\t};\n\tconst showGeneralOverlay = function () {\n\t\t$('#ep_profile_general_overlay').addClass('ep_profile_formModal_overlay_show');\n\t\t$('#ep_profile_general_overlay').css({display: 'block'});\n\t};\n\t\n\tconst hideGeneralOverlay = function () {\n\t\t$('#ep_profile_general_overlay').removeClass('ep_profile_formModal_overlay_show');\n\t\t$('#ep_profile_general_overlay').css({display: 'none'});\n\t\t$('#ep_profile_modal').removeClass('ep_profile_modal-show');\n\t\t$('#ep_profile_modal_user_list').removeClass('ep_profile_modal-show');\n\t\t$('#ep_profile_users_profile').removeClass('ep_profile_formModal_show');\n\t};\n\t\n\tconst getValidUrl = function (url) {\n\t\tif (url == '' || !url) return '';\n\t\tlet newUrl = window.decodeURIComponent(url);\n\t\tnewUrl = newUrl.trim().replace(/\\s/g, '');\n\t\n\t\tif (/^(:\\/\\/)/.test(newUrl)) {\n\t\t\treturn `http${newUrl}`;\n\t\t}\n\t\tif (!/^(f|ht)tps?:\\/\\//i.test(newUrl)) {\n\t\t\treturn `http://${newUrl}`;\n\t\t}\n\t\n\t\treturn newUrl;\n\t};\n\t\n\tconst getMonthName = function (monthNumber) {\n\t\tconst months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];\n\t\treturn months[monthNumber - 1];\n\t};\n\tconst getCustomeFormatDate = function (date) {\n\t\tif (date == 'today' || date == 'yesterday') return `Last seen ${date}`;\n\t\tdate = date.split('-');\n\t\treturn `Last seen ${date[2]} ${getMonthName(date[1])} ${date[0]}`;\n\t};\n\tconst getCustomDate = function (date) {\n\t\tif (date == 'today' || date == 'yesterday') return `Last seen ${date}`;\n\t\tdate = date.split('-');\n\t\treturn `Last seen ${date[2]}/${date[1]}/${date[0]}`;\n\t};\n\n\treturn {\n\t\tresetAllProfileImage,\n\t\tsendSignOutMessage,\n\t\taddTextChatMessage,\n\t\tscrollDownToLastChatText,\n\t\tloginByEmailAndUsernameWithoutValidation,\n\t\tloginByEmailAndUsername,\n\t\tisEmail,\n\t\tIsValid,\n\t\tgetFormData,\n\t\tsetFormData,\n\t\tisUsername,\n\t\tshowGeneralOverlay,\n\t\thideGeneralOverlay,\n\t\tgetValidUrl,\n\t\tgetMonthName,\n\t\tgetCustomeFormatDate,\n\t\tgetCustomDate,\n\t\t\n\t}\n\t\n})();\n\n","// var shared = require('./shared');\n\n\nconst syncData = (() => {\n\n\tconst syncAllFormsData = function (userId, data) {\n\t\t// users List\n\t\tconst user_selector = $(`.ep_profile_user_row[data-id=\"user_list_${userId}\"]`);\n\t\tif (user_selector.length) {\n\t\t\tconst usernameBox = user_selector.children('.ep_profile_user_list_profile_userDesc').children('.ep_profile_user_list_username');\n\t\t\tusernameBox.children('.ep_profile_user_list_username_text').text(data.username);\n\t\n\t\t\tuser_selector.children('.ep_profile_user_list_profile_userDesc').children('.ep_profile_user_list_profile_desc').text(data.about);\n\t\t\tif (data.homepage) {\n\t\t\t\tconst homepageElem = usernameBox.children('.ep_profile_contributor_link_container');\n\t\t\t\thomepageElem.attr({href: shared.getValidUrl(data.homepage)});\n\t\t\t}\n\t\t\tusernameBox.children('.ep_profile_contributor_status').text('Online');\n\t\t}\n\t\t// users list\n\t\n\t\n\t\t// profile card\n\t\n\t\t// $(\"#ep_profile_users_profile_name\").text(data.username)\n\t\t// $(\"#ep_profile_users_profile_desc\").text(data.about)\n\t\t// $(\"#ep_profile_users_profile_homepage\").attr({\"href\":data.homepage})\n\t\t// $(\"#ep_profile_users_profile_homepage\").text(data.homepage)\n\t\n\t\t// profile card\n\t\n\t\t// profile modal\n\t\n\t\t$('#ep_profile_modal-username').val(data.username);\n\t\t$('#ep_profile_modal-about').val(data.about);\n\t\t$('#ep_profile_modal-homepage').val(data.homepage);\n\t\t$('#ep_profile_modal-email').val(data.email);\n\t\tif (data.verified == true) {\n\t\t\t$('#ep_profile_modal_verification').attr('data-verification-status', 'true');\n\t\t\t$('#ep_profile_modal_verification').text('Verified');\n\t\t} else {\n\t\t\t$('#ep_profile_modal_verification').attr('data-verification-status', 'false');\n\t\t\t$('#ep_profile_modal_verification').text('Send verification email');\n\t\t}\n\t\n\t\t// if(data.push_notification == false)\n\t\t//     $(\"#ep_profile_modal_push_notification\").attr('checked','')\n\t\t// else\n\t\t//     $(\"#ep_profile_modal_push_notification\").attr('checked','checked')\n\t\n\t\t// profile modal\n\t};\n\tconst syncGeneralFormsData = function (userId, data) {\n\t\tconst user_selector = $(`.ep_profile_user_row[data-id=\"user_list_${userId}\"]`);\n\t\tif (user_selector.length) {\n\t\t\tconst usernameBox = user_selector.children('.ep_profile_user_list_profile_userDesc').children('.ep_profile_user_list_username');\n\t\t\tusernameBox.children('.ep_profile_user_list_username_text').text(data.username);\n\t\n\t\t\tuser_selector.children('.ep_profile_user_list_profile_userDesc').children('.ep_profile_user_list_profile_desc').text(data.about);\n\t\n\t\t\tconst homepageElem = usernameBox.children('.ep_profile_contributor_link_container');\n\t\t\thomepageElem.attr({href: shared.getValidUrl(data.homepage)});\n\t\n\t\n\t\t\tusernameBox.children('.ep_profile_contributor_status').text('Online');\n\t\t}\n\t};\n\t\n\t\n\tconst resetProfileModalFields = function () {\n\t\t$('#ep_profile_modal-username').val('');\n\t\t$('#ep_profile_modal-about').val('');\n\t\t$('#ep_profile_modal-homepage').val('');\n\t\t$('#ep_profile_modal-email').val('');\n\t\n\t\t$('#ep_profile_modalForm_name').val('');\n\t\t$('#ep_profile_modalForm_email').val('');\n\t\t$('#ep_profile_modal_homepage').val('');\n\t\t$('#ep_profile_modalForm_about_yourself').val('');\n\t};\n\tconst resetGeneralFields = function (userId) {\n\t\tconst user_selector = $(`.ep_profile_user_row[data-id=\"user_list_${userId}\"]`);\n\t\tif (user_selector.length) {\n\t\t\tconst usernameBox = user_selector.children('.ep_profile_user_list_profile_userDesc').children('.ep_profile_user_list_username');\n\t\t\tusernameBox.children('.ep_profile_user_list_username_text').text('');\n\t\t\tuser_selector.children('.ep_profile_user_list_profile_userDesc').children('.ep_profile_user_list_profile_desc').text('');\n\t\t\tconst homepageElem = usernameBox.children('.ep_profile_contributor_link_container');\n\t\t\thomepageElem.attr({href: ''});\n\t\t\tusernameBox.children('.ep_profile_contributor_status').text('');\n\t\t}\n\t};\n\n\treturn {\n\t\tsyncAllFormsData,\n\t\tsyncGeneralFormsData,\n\t\tresetProfileModalFields,\n\t\tresetGeneralFields,\n\t}\n\t\n\n})();\n\n"]}